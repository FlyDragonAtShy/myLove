<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
	<head>
		<meta charset="UTF-8">
		<title>myLoveâ¤</title>
		<script type="text/javascript" src="https://cdn.staticfile.org/jquery/1.12.4/jquery.min.js"></script>
		<link rel="stylesheet" type="text/css" href="https://www.layuicdn.com/layui/css/layui.css" />
		<script src="https://www.layuicdn.com/layui/layui.js"></script>
		<script type="text/javascript" src="canvas_bg.js"></script>
		<script>
			$(function() {
				
				//å¼€å¯å¼¹æ¡†
				 function opendiv(){
					 layui.use('layer', function(){
					   var layer = layui.layer;
					   layer.open({
					   	type: 1,
					   	title: "2020å€’è®¡æ—¶",
					   	anim: 2,
					   	area: ['600px', '500px'],
					   	content: $(".newYear"),
					   	success: function(layero, index) {},
					   	yes: function() {}
					   });
					  })
				 }
				 
				 var isOpen=1;
				 var setInterval2=setInterval(function() {
					 if(new Date().getTime()-new Date("2020/1/2 00:00:00").getTime()>0){
						 isOpen=-1;
					 }
					 if(isOpen==1){
						isOpen=0;
						 opendiv();
					 }else if(isOpen==-1){
						 return;
					 }
					 console.log((new Date("2020/1/1 00:00:00").getTime()-new Date().getTime())/1000)
					 $(".endSeconds").html(Math.ceil((new Date("2020/1/1 00:00:00").getTime()-new Date().getTime())/1000)+" ç§’")
					 if(new Date("2020/1/1 00:00:00").getTime()-new Date().getTime()<=0){
						$(".endTitle1").html("2020 å¹´");
					 	$(".endSeconds").html("ç¥ä½ äº‹äº‹å¦‚æ„");
						$(".endTitle2").show();
						$(".newYear").css("background-image","url(img/gif011.gif)")
						$(".newYear").append("<img src=\"img/love1.jpg\" alt=\"loveImg\" style=\"height: 280px;border: 10px solid rgba(255,255,205,0.7);\" />")
						clearInterval(setInterval2);
					 }
				 })
				 
				var setInterval1=setInterval(function() {
					let nTime = new Date();
					dateDiff(nTime, "2022/10/02 19:20:33");
					// console.log(formartDate(nTime));
					// console.log("æ—¶é—´å·®ï¼š" + dTime);
				}, 1000)

				function dateDiff(nTime, sTime) {
					if (sTime == null || sTime == "") {
						sTime = "2022/10/02 19:20:33";
					}
					let day1 = new Date(sTime).getTime();
					let iDays = (nTime.getTime() - day1) / (1000 * 60 * 60 * 24); //å¤©æ•°
					let iHours = (nTime.getTime() - day1) / (1000 * 60 * 60); //å°æ—¶æ•°
					let iMinutes = (nTime.getTime() - day1) / (1000 * 60); //åˆ†é’Ÿæ•°
					$("#sTime").html("å§‹: " + "2022/10/02 19:20:33");
					//$("#nTime").html("å½“å‰æ—¶é—´: " + formartDate(nTime));
					$("#dDays").html("ç›¸çˆ±å¤©æ•°: " + iDays.toFixed(13) + "å¤©");
					$("#dHour").html("ç›¸çˆ±å°æ—¶: " + iHours.toFixed(10) + "å°æ—¶");
					$("#dMinutes").html("ç›¸çˆ±åˆ†é’Ÿ: " + iMinutes.toFixed(8) + "åˆ†é’Ÿ");
					// return iHours
				};

				/*æ ¼å¼åŒ–æ—¶é—´  */
				function formartDate(mTime) {
					var mYear = mTime.getFullYear();
					var mMonth = mTime.getMonth() + 1;
					var mDate = mTime.getDate();
					var mHours = mTime.getHours();
					var mMinutes = mTime.getMinutes();
					var mSeconds = mTime.getSeconds();
					if (mMinutes < 10) {
						mMinutes = "0" + mMinutes
					}
					if (mSeconds < 10) {
						mSeconds = "0" + mSeconds
					}
					return mYear + "-" + mMonth + "-" + mDate + "  " + mHours + ":" + mMinutes + ":" + mSeconds;
				}

				/* éŸ³ä¹ç‚¹å‡» */
				$(".musicBtn").on("click", function() {
					if ($(".audio1").get(0).paused) {
						$(".audio1").get(0).play();
						$(".musicBtn i").addClass("layui-anim-loop")
					} else {
						$(".audio1").get(0).pause();
						$(".musicBtn i").removeClass("layui-anim-loop")
					}

				})
			})
		</script>
		<style>
			* {
				cursor: pointer;
			}

			body {
				background-color: beige;
			}

			#div1 {
				text-align: center;
				position: relative;
				top: 55px;
			}

			.loveName {
				color: red;
				font-weight: bold;
				font-size: 55px;
				height: 120px;
			}

			.lTime {
				/* width: 35%; */
				margin: 0 auto;
				text-align: center;
				font-size: 30px;
				font-family: Arial, sans-serif;
				color: #333;
				background-color: #f5f5f5;
				border-radius: 10px;
				box-shadow: 2px 2px 5px #ccc;
				border: 1px solid #ccc;
				padding: 10px;
			}

			#author {
				position: absolute;
				left: 75%;
				top: 75%;
				text-align: center;
			}
			#footer{
				color: #AA13AA;
			}
		</style>
	</head>
	<body>
		<canvas id="c" style="position: absolute;z-index: -1;text-align: center;top: -20px;left: -20px;"></canvas>
		<div id="div1">
			<div class="loveName">Armourâ¤ç›ç›ğŸ˜„</div>
			<div id="loveTime" class="loveTime">
				<div id="sTime" class="lTime"></div><br />
				<div id="dDays" class="lTime"></div><br />
				<div id="dHour" class="lTime"></div><br />
				<div id="dMinutes" class="lTime"></div><br />
			</div>
		</div>
		<button class="musicBtn  ">
			<i class="layui-icon layui-icon-headset layui-anim layui-anim-rotate layui-anim-loop" style="font-size: 28px;position: fixed;left: 51px;top: 100px;"></i>
		</button>
		<audio autoplay="autoplay" loop class="audio1">
			<source src="music/yuai.mp3" type="audio/mpeg">
		</audio>
		<div class="newYear" style="font-size: 30px;color: #0FCECE;text-align: center;display: none">
			<br />
			<h2 class="endTitle1">è·ç¦»2020å¹´è¿˜å‰©ä½™ï¼š</h2>
			<br />
			<h1 style="font-size: 88px;color: aqua;" class="endSeconds">50ç§’</h1>
			<br />
			<h2 class="endTitle2" style="font-size: 88px;color: red;display: none;">â¤â¤</h2>
			<br />
		</div>
		<footer id="author">
			<p>@å¯»å±¿</p>
			<p>ä½ æ˜¯åƒå †é›ªæˆ‘æ˜¯é•¿è¡—</p>
		</footer>
	</body>
</html>
